---
import Layout from "../layouts/Layout.astro";

let formData = {
  name: "",
  email: "",
  message: "",
};

// Explicitly define event type and use `onsubmit`
const handleFormSubmit = (e: SubmitEvent) => {
  e.preventDefault();
  const { name, email, message } = formData;

  if (!name || !email || !message) {
    alert("All fields are required!");
    return;
  }

  // Process form submission here (e.g., send email)
  alert("Form submitted successfully!");
};

// Use `oninput` instead of `onInput` and define correct event type
const handleInputChange = (e: Event, field: keyof typeof formData) => {
  const target = e.target as HTMLInputElement | HTMLTextAreaElement;
  formData[field] = target.value;
};
---

<Layout>
  <h1 class="text-center">Contact Me</h1>
  <form class="mt-6 max-w-md mx-auto bg-gray-800 p-6 rounded-lg" onsubmit={handleFormSubmit}>
    <label class="block mb-2">Name</label>
    <input
      type="text"
      class="w-full p-2 rounded bg-gray-700"
      oninput={(e) => handleInputChange(e, "name")}
      required
    />

    <label class="block mt-4 mb-2">Email</label>
    <input
      type="email"
      class="w-full p-2 rounded bg-gray-700"
      oninput={(e) => handleInputChange(e, "email")}
      required
    />

    <label class="block mt-4 mb-2">Message</label>
    <textarea
      class="w-full p-2 rounded bg-gray-700"
      oninput={(e) => handleInputChange(e, "message")}
      required
    ></textarea>

    <button type="submit" class="bg-blue-400 text-white px-4 py-2 mt-4 rounded hover:bg-blue-500">
      Send Message
    </button>
  </form>
</Layout>
